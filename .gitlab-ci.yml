stages:
  - test
  - Build
  - Deploy
  - Build Prod
  - Deploy Prod
  - Cleanup
  - Release

variables:
  VUFIND_VERSION: "8.1.1"
  # Used during upgrade, which needs to know previous version
  PREV_VUFIND_VERSION: "8.1"
  SIMPLESAMLPHP_VERSION: "1.19.6"
  DEPLOY_HOST_A: catalog-1.aws.lib.msu.edu
  DEPLOY_HOST_B: catalog-2.aws.lib.msu.edu
  DEPLOY_HOST_C: catalog-3.aws.lib.msu.edu
  COMPOSE_PATH: /home/deploy/$STACK_NAME

include:
  - project: 'msu-libraries/public/cicd-templates'
    ref: main
    file: 'SSH.gitlab-ci.yml'
  - 'templates/Deploy.gitlab-ci.yml'
  - 'templates/DeployProd.gitlab-ci.yml'
  - 'templates/Build.gitlab-ci.yml'
  - 'templates/BuildProd.gitlab-ci.yml'
  - 'templates/Scan.gitlab-ci.yml'
  - 'templates/Release.gitlab-ci.yml'
